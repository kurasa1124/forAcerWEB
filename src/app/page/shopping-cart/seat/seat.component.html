<h1>
  幾米音樂劇《時光電影院》
</h1>
<h4>
  臺中國家歌劇院大劇院 <span class="time">2018-01-20 19:30</span>
  <button
    (click)="
      lightBox.showBlur = !seatMap;
      lightBox.showSeats = !seatMap;
      seatMap = false
    "
  >
    {{ seatMap ? "更換票區" : "更換場次" }}
  </button>
</h4>

<div *ngIf="!seatMap">
  <div class="choice">
    <button [class.active]="computerChoice" (click)="computerChoice = true">
      電腦選位
    </button>
    <button [class.active]="!computerChoice" (click)="computerChoice = false">
      手動選位
    </button>
    <div
      class="checkbox"
      *ngIf="computerChoice"
      (click)="noContinuous = !noContinuous"
    >
      <i class="mi">{{
        noContinuous ? "check_box" : "check_box_outline_blank"
      }}</i>
      電腦配未接受不連號
    </div>
  </div>
  <div class="seats" (click)="next()" [style.height]="imageHeight + 80 + 'px'">
    <div class="table">
      <table cellpadding="0" cellspacing="0" class="f1">
        <tr class="head">
          <th class="color"></th>
          <th>票區</th>
          <th>票價</th>
          <th>空位</th>
        </tr>
        <tr
          *ngFor="let seat of seats"
          [class.id]="seat.id"
          [class.hover]="selectId == seat.id"
          (mouseenter)="selectId = seat.id"
          (mouseleave)="selectId = null"
          [style.borderColor]="seat.color"
        >
          <td class="color" [style.background]="seat.color"></td>
          <td>{{ seat.title }}</td>
          <td>{{ seat.price }}</td>
          <td>{{ seat.num || "售完" }}</td>
        </tr>
      </table>
    </div>

    <app-map
      #image
      class="f1"
      (colorChange)="setTable($event)"
      (hoverChange)="hover($event)"
      (heightChange)="imageHeight = $event"
      [hoverId]="selectId"
    ></app-map>
  </div>
</div>

<div class="seatMap" *ngIf="seatMap">
  <div class="flex">
    <h2>
      請勾選你要的座位
    </h2>
    <div class="seat-icons flex">
      <span class="flex"> <img src="assets/seat-empty.svg" alt="" /> 空位</span>
      <span class="flex"
        ><img src="assets/seat-check.svg" alt="" /> 已加入購物車</span
      >
      <span class="flex"
        ><img src="assets/seat-lock.svg" alt="" /> 已被選擇</span
      >
      <span class="flex"
        ><img src="assets/seat-people.svg" alt="" /> 已售出</span
      >
    </div>
  </div>
  <div class="seat-content">
    <app-seat-content></app-seat-content>
    <div class="securiry">
      <img [src]="imgDataURL" alt="" (click)="reload()" />
      <input type="text" placeholder="驗證碼" [(ngModel)]="verificationValue" />
      <button
        [class.active]="verificationValue.toLocaleLowerCase() == code"
        (click)="addToCart()"
        [disabled]="verificationValue.toLocaleLowerCase() != code"
      >
        加入購物車
      </button>
    </div>
  </div>
</div>
